import java.io.IOException;
import java.net.*;




public class RcClient {
	private DatagramSocket sock;
	private DatagramPacket out;
	private int speed=0;
	private int angle=0;

	public RcClient(String ip,int port){
		try {
			sock = new DatagramSocket();
			InetAddress host = InetAddress.getByName(ip);
			byte[] welcomeMessage="Connection created!!!".getBytes();
			System.out.println("Host:"+ip+" Port:"+port);
			out = new DatagramPacket(welcomeMessage, welcomeMessage.length,host, port);
			sock.send(out);
		} catch (IOException e1) {
			e1.printStackTrace();
		}

	}

	public void send(String income) throws IOException{
		
		String[] in=income.split(":");
		switch (in[0]){
			case "Pressed":
				switch(in[1]){
					case "W":speed=6;break;
					case "S":speed=-6;break;
					case "A":angle=-10;break;
					case "D":angle=10;break;
				}
				break;
			case "Released":
				switch(in[1]){
					case "W":speed=0;break;
					case "S":speed=0;break;
					case "A":angle=0;break;
					case "D":angle=0;break;
				}
				break;
			case "Button":
				switch(in[1]){
					case "Up":break;
					case "Down":break;
					case "Left":break;
					case "Right":break;
				}
				break;
		
		}
		out.setData(new String(speed+"+"+angle+".").getBytes());  
		sock.send(out);
	}
	
	
	
	public void end() throws IOException{
		out.setData(new String("end").getBytes());  
		sock.send(out);
		sock.close();
	}

}
